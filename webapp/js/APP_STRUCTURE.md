# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ `app.js`

## üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

`app.js` ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π. –≠—Ç–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏ –º–µ–∂–¥—É —Å–æ–±–æ–π.

**–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** ~371 —Å—Ç—Ä–æ–∫–∞  
**–¢–∏–ø:** ES6 –º–æ–¥—É–ª—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `import/export`)  
**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** `DOMContentLoaded` event listener

---

## üì¶ –ò–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 1. **admin.js** ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –º–∞–≥–∞–∑–∏–Ω–∞
```javascript
import { initAdmin, loadShopSettings } from './admin.js';
```
- **`initAdmin()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- **`loadShopSettings()`** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–≥–∞–∑–∏–Ω–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞ (—Å—Ç—Ä–æ–∫–∞ 346)

---

### 2. **api.js** ‚Äî API –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å backend
```javascript
import { getContext } from './api.js';
```
- **`getContext(shopOwnerId)`** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞ (viewer_id, shop_owner_id, role, permissions, bot_id)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 240)

---

### 3. **cart.js** ‚Äî –ú–æ–¥—É–ª—å –∫–æ—Ä–∑–∏–Ω—ã
```javascript
import { initCart, loadCart, loadOrders, loadPurchases, setupCartButton, setupCartModal, updateCartUI } from './cart.js';
```
- **`initCart()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã
- **`loadCart()`** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω—ã
- **`loadOrders()`** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **`loadPurchases()`** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **`setupCartButton()`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
- **`setupCartModal()`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã
- **`updateCartUI()`** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∫–æ—Ä–∑–∏–Ω—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã (—Å—Ç—Ä–æ–∫–∏ 101, 339-340), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª–∏ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π/–∑–∞–∫–∞–∑–æ–≤/–ø—Ä–æ–¥–∞–∂

---

### 4. **profile.js** ‚Äî –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
import { initProfile, setupProfileButton } from './profile.js';
```
- **`initProfile()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
- **`setupProfileButton()`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å—Ç—Ä–æ–∫–∏ 353-354)

---

### 5. **telegram.js** ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp
```javascript
import { getInitData, getTelegramInstance, initTelegram, requireTelegram } from './telegram.js';
```
- **`initTelegram()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp SDK
- **`requireTelegram()`** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Telegram (–≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- **`getTelegramInstance()`** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Telegram WebApp
- **`getInitData()`** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ initData –∏–∑ Telegram

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (—Å—Ç—Ä–æ–∫–∏ 82, 94, 289)

---

### 6. **categories.js** ‚Äî –ú–æ–¥—É–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤
```javascript
import {
    categoriesHierarchy,
    currentCategoryId,
    initCategoriesDependencies,
    selectedCategoryIds,
    selectedMainCategoryId
} from './categories.js';
```
- **`categoriesHierarchy`** ‚Äî –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- **`currentCategoryId`** ‚Äî —Ç–µ–∫—É—â–∞—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- **`selectedCategoryIds`** ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- **`selectedMainCategoryId`** ‚Äî –≤—ã–±—Ä–∞–Ω–Ω–∞—è –≥–ª–∞–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- **`initCategoriesDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—Å—Ç—Ä–æ–∫–∞ 117), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

### 7. **products.js** ‚Äî –ú–æ–¥—É–ª—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
```javascript
import { initProductsDependencies, renderProducts } from './products.js';
```
- **`renderProducts(products)`** ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å–µ—Ç–∫–µ
- **`initProductsDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è —Ç–æ–≤–∞—Ä–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è —Ç–æ–≤–∞—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 163), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

### 8. **product-edit.js** ‚Äî –ú–æ–¥—É–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
```javascript
import { deleteProduct, initProductEditDependencies, markAsSold, showEditProductModal, showSellModal } from './product-edit.js';
```
- **`showEditProductModal(prod)`** ‚Äî –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- **`deleteProduct(productId)`** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- **`markAsSold(productId, product)`** ‚Äî –ø–æ–º–µ—Ç–∏—Ç—å —Ç–æ–≤–∞—Ä –∫–∞–∫ –ø—Ä–æ–¥–∞–Ω–Ω—ã–π
- **`showSellModal(productId, product)`** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–¥–∞–∂–∏
- **`initProductEditDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞ 152), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å —Ç–æ–≤–∞—Ä–æ–≤

---

### 9. **reservations.js** ‚Äî –ú–æ–¥—É–ª—å —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π
```javascript
import { cancelReservation, initReservationsDependencies, showReservationModal } from './reservations.js';
```
- **`showReservationModal(productId)`** ‚Äî –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏
- **`cancelReservation(reservationId, productId)`** ‚Äî –æ—Ç–º–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏
- **`initReservationsDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π (—Å—Ç—Ä–æ–∫–∞ 180), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å —Ç–æ–≤–∞—Ä–æ–≤

---

### 10. **orders.js** ‚Äî –ú–æ–¥—É–ª—å –∑–∞–∫–∞–∑–æ–≤
```javascript
import { initOrdersDependencies, showOrderModal } from './orders.js';
```
- **`showOrderModal(productId)`** ‚Äî –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∑–∞–∫–∞–∑–∞
- **`initOrdersDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è –∑–∞–∫–∞–∑–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –∑–∞–∫–∞–∑–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 192), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å —Ç–æ–≤–∞—Ä–æ–≤

---

### 11. **purchases.js** ‚Äî –ú–æ–¥—É–ª—å –ø—Ä–æ–¥–∞–∂/–ø–æ–∫—É–ø–æ–∫
```javascript
import { initPurchasesDependencies, showPurchaseModal } from './purchases.js';
```
- **`showPurchaseModal(prod)`** ‚Äî –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
- **`initPurchasesDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è –ø—Ä–æ–¥–∞–∂

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –ø—Ä–æ–¥–∞–∂ (—Å—Ç—Ä–æ–∫–∞ 203), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å —Ç–æ–≤–∞—Ä–æ–≤

---

### 12. **filters.js** ‚Äî –ú–æ–¥—É–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
```javascript
import { applyFilters, initFilters, initFiltersDependencies, updateProductFilterOptions } from './filters.js';
```
- **`initFilters()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- **`applyFilters()`** ‚Äî –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫ —Ç–æ–≤–∞—Ä–∞–º
- **`updateProductFilterOptions()`** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–π —Ñ–∏–ª—å—Ç—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- **`initFiltersDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 104, 336), –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –º–æ–¥—É–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

### 13. **modals.js** ‚Äî –ú–æ–¥—É–ª—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
```javascript
import { initModalsDependencies, setupModals } from './modals.js';
```
- **`setupModals()`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
- **`initModalsDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω (—Å—Ç—Ä–æ–∫–∏ 299, 333)

---

### 14. **data.js** ‚Äî –ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
```javascript
import { initDataDependencies, loadData, updateShopNameInHeader } from './data.js';
```
- **`loadData()`** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–≤–∞—Ä—ã)
- **`updateShopNameInHeader()`** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –º–∞–≥–∞–∑–∏–Ω–∞
- **`initDataDependencies()`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∞ 320), –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (—Å—Ç—Ä–æ–∫–∏ 357, 360)

---

## üîß –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```javascript
let appContext = null; // –ö–æ–Ω—Ç–µ–∫—Å—Ç –º–∞–≥–∞–∑–∏–Ω–∞ (viewer_id, shop_owner_id, role, permissions, bot_id)
```
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –º–∞–≥–∞–∑–∏–Ω–∞
- **–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:** –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–∑ backend —á–µ—Ä–µ–∑ `getContext()` (—Å—Ç—Ä–æ–∫–∞ 240)
- **–î–æ—Å—Ç—É–ø:** –ß–µ—Ä–µ–∑ `window.getAppContext()` –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```javascript
let allProducts = []; // –í—Å–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
let productFilters = {
    price: 'all',        // 'all', 'low', 'medium', 'high'
    inStock: false,
    hotOffer: false,
    withDiscount: false,
    madeToOrder: false,
    newItems: false,    // –ù–æ–≤–∏–Ω–∫–∏
    sortBy: 'none'      // 'none', 'price-asc', 'price-desc'
};
```
- **`allProducts`** ‚Äî –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **`productFilters`** ‚Äî –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤, –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `window.productFilters`

### –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞
```javascript
let currentImageIndex = 0;      // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
let currentImages = [];        // –ú–∞—Å—Å–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞
let currentProduct = null;     // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
let currentImageLoadId = 0;    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ `modalState` –æ–±—ä–µ–∫—Ç —Å –≥–µ—Ç—Ç–µ—Ä–∞–º–∏/—Å–µ—Ç—Ç–µ—Ä–∞–º–∏

---

## üé® DOM —ç–ª–µ–º–µ–Ω—Ç—ã

–í—Å–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫—Ä–∏–ø—Ç–∞:

```javascript
const userNameElement = document.getElementById('user-name');        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–º–∞–≥–∞–∑–∏–Ω–∞
const categoriesNav = document.getElementById('categories-nav');      // –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
const productsGrid = document.getElementById('products-grid');       // –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
const modal = document.getElementById('product-modal');              // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞
const modalClose = document.querySelector('.modal-close');           // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞
const reservationModal = document.getElementById('reservation-modal'); // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏
const reservationClose = document.querySelector('.reservation-close'); // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏
const orderModal = document.getElementById('order-modal');           // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞
const orderClose = document.querySelector('.order-close');          // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞–∫–∞–∑–∞
const sellModal = document.getElementById('sell-modal');            // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–¥–∞–∂–∏
const sellClose = document.querySelector('.sell-close');           // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–¥–∞–∂–∏
```

---

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ `DOMContentLoaded` (—Å—Ç—Ä–æ–∫–∞ 76) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:

### –≠—Ç–∞–ø 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram (—Å—Ç—Ä–æ–∫–∏ 79-98)
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp SDK (`initTelegram()`)
2. –û–∂–∏–¥–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ initData (100ms)
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Telegram (`requireTelegram()`)

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ Telegram, –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è.

---

### –≠—Ç–∞–ø 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã (—Å—Ç—Ä–æ–∫–∞ 101)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã (`setupCartModal()`)

---

### –≠—Ç–∞–ø 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª–µ–π (—Å—Ç—Ä–æ–∫–∏ 103-209)

**–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!** –ú–æ–¥—É–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏–∑-–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

1. **–§–∏–ª—å—Ç—Ä—ã** (—Å—Ç—Ä–æ–∫–∞ 104) ‚Äî –ø–µ—Ä–≤—ã–º–∏, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** (—Å—Ç—Ä–æ–∫–∞ 117) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã
3. **–¢–æ–≤–∞—Ä—ã** (—Å—Ç—Ä–æ–∫–∞ 163) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
   - –ü–µ—Ä–µ–¥ —ç—Ç–∏–º —Å–æ–∑–¥–∞–µ—Ç—Å—è `modalState` –æ–±—ä–µ–∫—Ç (—Å—Ç—Ä–æ–∫–∏ 125-148)
4. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤** (—Å—Ç—Ä–æ–∫–∞ 152) ‚Äî –ü–ï–†–ï–î —Ç–æ–≤–∞—Ä–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–æ–≤–∞—Ä–∞—Ö
5. **–†–µ–∑–µ—Ä–≤–∞—Ü–∏–∏** (—Å—Ç—Ä–æ–∫–∞ 180) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏ –∫–æ—Ä–∑–∏–Ω—É
6. **–ó–∞–∫–∞–∑—ã** (—Å—Ç—Ä–æ–∫–∞ 192) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏ –∫–æ—Ä–∑–∏–Ω—É
7. **–ü—Ä–æ–¥–∞–∂–∏** (—Å—Ç—Ä–æ–∫–∞ 203) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏ –∫–æ—Ä–∑–∏–Ω—É

---

### –≠—Ç–∞–ø 4: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 211-286)
1. –ü–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URL:
   - –ü—Ä—è–º–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `start` –∏–∑ Mini App —Å—Å—ã–ª–∫–∏ (`t.me/botusername/shop?start=store_user_id`)
2. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ `getContext(shopOwnerId)`
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- `viewer_id` ‚Äî ID —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `shop_owner_id` ‚Äî ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞
- `role` ‚Äî —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ('owner' –∏–ª–∏ 'client')
- `permissions` ‚Äî –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- `bot_id` ‚Äî ID –±–æ—Ç–∞ (–¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤)

---

### –≠—Ç–∞–ø 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (—Å—Ç—Ä–æ–∫–∏ 288-296)
- –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤: –≤—Ä–µ–º–µ–Ω–Ω–æ "–ú–∞–≥–∞–∑–∏–Ω" (–æ–±–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫)
- –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤: "–ü—Ä–∏–≤–µ—Ç, {–∏–º—è}!" –∏–∑ Telegram
- Fallback: "–ü—Ä–∞–π—Å"

---

### –≠—Ç–∞–ø 6: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω (—Å—Ç—Ä–æ–∫–∏ 298-317)
- –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å–µ—Ö DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –≥–µ—Ç—Ç–µ—Ä–æ–≤/—Å–µ—Ç—Ç–µ—Ä–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –º–æ–¥—É–ª—å –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

---

### –≠—Ç–∞–ø 7: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏ 319-330)
- –ü–µ—Ä–µ–¥–∞—á–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ `window` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å `admin.js`

---

### –≠—Ç–∞–ø 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 332-340)
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω (`setupModals()`)
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (`initFilters()`)
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã (`setupCartButton()`)
4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã (`initCart()`)

---

### –≠—Ç–∞–ø 9: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–≥–∞–∑–∏–Ω–∞ (—Å—Ç—Ä–æ–∫–∏ 342-350)
- –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞: –∑–∞–≥—Ä—É–∑–∫–∞ —Å–≤–æ–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤: –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞

---

### –≠—Ç–∞–ø 10: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è (—Å—Ç—Ä–æ–∫–∏ 352-354)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### –≠—Ç–∞–ø 11: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (—Å—Ç—Ä–æ–∫–∏ 356-366)
1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –º–∞–≥–∞–∑–∏–Ω–∞ (`updateShopNameInHeader()`)
2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–≤–∞—Ä—ã) (`loadData()`)
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã —á–µ—Ä–µ–∑ 500ms (`updateCartUI()`)

---

## üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

### –°—Ö–µ–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```
app.js (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
‚îú‚îÄ‚îÄ telegram.js (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
‚îú‚îÄ‚îÄ api.js (–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
‚îú‚îÄ‚îÄ admin.js (–¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤)
‚îú‚îÄ‚îÄ profile.js (–¥–ª—è –≤—Å–µ—Ö)
‚îú‚îÄ‚îÄ cart.js (–¥–ª—è –≤—Å–µ—Ö)
‚îÇ
‚îú‚îÄ‚îÄ data.js
‚îÇ   ‚îú‚îÄ‚îÄ api.js
‚îÇ   ‚îú‚îÄ‚îÄ admin.js
‚îÇ   ‚îú‚îÄ‚îÄ cart.js
‚îÇ   ‚îú‚îÄ‚îÄ categories.js
‚îÇ   ‚îî‚îÄ‚îÄ filters.js
‚îÇ
‚îú‚îÄ‚îÄ categories.js
‚îÇ   ‚îî‚îÄ‚îÄ filters.js
‚îÇ
‚îú‚îÄ‚îÄ products.js
‚îÇ   ‚îú‚îÄ‚îÄ product-edit.js
‚îÇ   ‚îú‚îÄ‚îÄ reservations.js
‚îÇ   ‚îú‚îÄ‚îÄ orders.js
‚îÇ   ‚îú‚îÄ‚îÄ purchases.js
‚îÇ   ‚îî‚îÄ‚îÄ data.js
‚îÇ
‚îú‚îÄ‚îÄ filters.js
‚îÇ   ‚îú‚îÄ‚îÄ categories.js
‚îÇ   ‚îî‚îÄ‚îÄ products.js
‚îÇ
‚îú‚îÄ‚îÄ modals.js (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏)
‚îÇ
‚îú‚îÄ‚îÄ product-edit.js
‚îÇ   ‚îî‚îÄ‚îÄ data.js
‚îÇ
‚îú‚îÄ‚îÄ reservations.js
‚îÇ   ‚îú‚îÄ‚îÄ cart.js
‚îÇ   ‚îî‚îÄ‚îÄ data.js
‚îÇ
‚îú‚îÄ‚îÄ orders.js
‚îÇ   ‚îú‚îÄ‚îÄ cart.js
‚îÇ   ‚îî‚îÄ‚îÄ data.js
‚îÇ
‚îî‚îÄ‚îÄ purchases.js
    ‚îú‚îÄ‚îÄ cart.js
    ‚îî‚îÄ‚îÄ data.js
```

---

## üì§ –≠–∫—Å–ø–æ—Ä—Ç—ã –≤ window (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

```javascript
window.productFilters = productFilters;              // –î–æ—Å—Ç—É–ø –∫ —Ñ–∏–ª—å—Ç—Ä–∞–º –¥–ª—è categories.js
window.getAppContext = function() { return appContext; }; // –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
window.loadData = loadData;                           // –î–ª—è admin.js
window.updateShopNameInHeader = updateShopNameInHeader; // –î–ª—è admin.js
```

---

## üéØ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π

| –ú–æ–¥—É–ª—å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|--------|----------------|
| **app.js** | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º |
| **telegram.js** | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp SDK |
| **api.js** | –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å backend API |
| **data.js** | –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã), –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ |
| **categories.js** | –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º |
| **products.js** | –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤, –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞ |
| **product-edit.js** | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤ |
| **filters.js** | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º |
| **cart.js** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π (—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏, –∑–∞–∫–∞–∑—ã, –ø–æ–∫—É–ø–∫–∏) |
| **reservations.js** | –†–µ–∑–µ—Ä–≤–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ |
| **orders.js** | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ |
| **purchases.js** | –ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤ |
| **modals.js** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏ |
| **admin.js** | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) |
| **profile.js** | –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## üîÑ –ü–∞—Ç—Ç–µ—Ä–Ω Dependency Injection

–í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Dependency Injection —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `init*Dependencies()`:

1. **app.js** —Å–æ–∑–¥–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (DOM —ç–ª–µ–º–µ–Ω—Ç—ã, –≥–µ—Ç—Ç–µ—Ä—ã, —Å–µ—Ç—Ç–µ—Ä—ã)
2. **app.js** –ø–µ—Ä–µ–¥–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ `init*Dependencies()`
3. –ú–æ–¥—É–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
4. –ú–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π
- –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–µ–Ω** ‚Äî –º–æ–¥—É–ª–∏ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
2. **Telegram –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Telegram WebApp
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** ‚Äî –≤—Å–µ –º–æ–¥—É–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –µ–≥–æ —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä—ã
4. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** ‚Äî `allProducts`, `productFilters`, `appContext` –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä—ã
5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚Äî –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `window` –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –º–æ–¥—É–ª–µ–π

---

## üõ†Ô∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

–§–∞–π–ª –±—ã–ª —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω –∏–∑ ~2939 —Å—Ç—Ä–æ–∫ –¥–æ ~371 —Å—Ç—Ä–æ–∫–∏. –ë–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:
- ‚úÖ categories.js
- ‚úÖ products.js
- ‚úÖ product-edit.js
- ‚úÖ reservations.js
- ‚úÖ orders.js
- ‚úÖ purchases.js
- ‚úÖ filters.js
- ‚úÖ modals.js
- ‚úÖ data.js

**–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å app.js:** –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.



