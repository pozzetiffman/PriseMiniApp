// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è API
// –í–ê–ñ–ù–û: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ngrok URL –æ–±–Ω–æ–≤–∏—Ç–µ API_BASE_URL –∑–¥–µ—Å—å

/**
 * –ë–∞–∑–æ–≤—ã–π URL API
 * 
 * –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ngrok URL:
 * 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok: ngrok http 8000
 * 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://xxxx-xx-xx-xx-xx.ngrok-free.app)
 * 3. –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –Ω–∏–∂–µ
 */
export const API_BASE_URL = "https://unmaneuvered-chronogrammatically-otelia.ngrok-free.dev".trim();

/**
 * –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
 */
export const API_TIMEOUTS = {
    health: 5000,      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
    products: 10000,   // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
    categories: 8000,  // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    context: 8000,     // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    default: 10000     // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
};

/**
 * –ù–∞—Å—Ç—Ä–æ–π–∫–∏ retry –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
 */
export const RETRY_CONFIG = {
    maxAttempts: 3,        // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
    delay: 1000,           // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (–º—Å)
    backoff: 1.5           // –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
};

/**
 * –ü–æ–ª—É—á–∏—Ç—å API_BASE —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∏–∑ URL (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
 */
export function getApiBase() {
    // –ü–æ–ø—ã—Ç–∫–∞ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    let apiBase = API_BASE_URL;
    
    // –ü–æ–ø—ã—Ç–∫–∞ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å window.API_BASE_URL (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
    if (typeof window !== 'undefined' && window.API_BASE_URL) {
        apiBase = window.API_BASE_URL;
        console.log('üì° Using API_BASE from window.API_BASE_URL:', apiBase);
    }
    
    // –ü–æ–ø—ã—Ç–∫–∞ 3: –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ URL (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
    // –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localhost
    if (typeof window !== 'undefined' && window.location.hostname === 'localhost') {
        // –í development –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localhost, –Ω–æ –≤ production —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
        // –û—Å—Ç–∞–≤–ª—è–µ–º —ç—Ç–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    }
    
    return apiBase.trim();
}

